


<!doctype html>
<html class="no-js" lang="en">
  
<head><!-- begin head.html -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
    <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />

    <link rel="icon" href="../../../_static/img/favicon.ico" type="image/x-icon"/>
    <link rel="canonical" href="https://docs.scylladb.com/">

    <link rel="author" href="mailto:info@scylladb.com">
    <link rel="stylesheet" href="../../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../_static/copybutton.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script src="../../../_static/js/vendor/modernizr.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T8P2JP');</script>
    <!-- End Google Tag Manager -->

    <!-- Marketo -->
    <script type="text/javascript"> (function() { var didInit = false; function initMunchkin() { if(didInit === false) { didInit = true; Munchkin.init('791-QBF-350'); } } var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//munchkin.marketo.net/munchkin.js'; s.onreadystatechange = function() { if (this.readyState == 'complete' || this.readyState == 'loaded') { initMunchkin(); } }; s.onload = initMunchkin; document.getElementsByTagName('head')[0].appendChild(s); })(); </script>
    <!-- End Marketo -->

<!-- end head.html -->
</head>

<body>
<header id="header" class="animated">
    <div class="topbar_continer contain-to-grid clearfix">
        <nav class="top-bar" id="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <div class="logo">
                        <a href="/"><img src="../../../_static/img/logo-scylla-docs.svg" alt="" width="151"></a>
                    </div>
                </li>
                <li class="toggle-topbar"><a href="#"><span class="icon-manu"></span></a></li>
            </ul>
            <section class="top-bar-section clearfix">
                <ul class="right">
                    
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">Scylla Cloud</a>
                    </li>
                    
                    <li>
                        <a href="https://university.scylladb.com/">Scylla University</a>
                    </li>
                    
                    <li>
                        <a href="https://www.scylladb.com/">ScyllaDB Home</a>
                    </li>
                    
                    <li class="search_continer show-for-medium-up">	
                        <ci-search></ci-search>	
                    </li>	
                </ul>
            </section>
        </nav>
    </div>
</header>
<section id="content">
    <div class="row">

        <div class="large-6 large-push-3 columns">
            <div class="section" id="module-cassandra.query">
<span id="cassandra-query-prepared-statements-batch-statements-tracing-and-row-factories"></span><h1><code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories<a class="headerlink" href="#module-cassandra.query" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="cassandra.query.tuple_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">tuple_factory</code><span class="sig-paren">(</span><em>colnames</em>, <em>rows</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#tuple_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.tuple_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns each row as a tuple</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT name, age FROM users LIMIT 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(&#39;Bob&#39;, 42)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="cassandra.query.named_tuple_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">named_tuple_factory</code><span class="sig-paren">(</span><em>colnames</em>, <em>rows</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#named_tuple_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.named_tuple_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns each row as a <a class="reference external" href="https://docs.python.org/2/library/collections.html#collections.namedtuple">namedtuple</a>.
This is the default row factory.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">named_tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">named_tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT name, age FROM users LIMIT 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># you can access field by their name:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;name: </span><span class="si">%s</span><span class="s2">, age: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="go">name: Bob, age: 42</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># or you can access fields by their position (like a tuple)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="n">user</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;name: </span><span class="si">%s</span><span class="s2">, age: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="go">name: Bob, age: 42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">age</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;name: </span><span class="si">%s</span><span class="s2">, age: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="go">name: Bob, age: 42</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="cassandra.query.dict_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">dict_factory</code><span class="sig-paren">(</span><em>colnames</em>, <em>rows</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#dict_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.dict_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns each row as a dict.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">dict_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">dict_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT name, age FROM users LIMIT 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">{u&#39;age&#39;: 42, u&#39;name&#39;: u&#39;Bob&#39;}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="cassandra.query.ordered_dict_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">ordered_dict_factory</code><span class="sig-paren">(</span><em>colnames</em>, <em>rows</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#ordered_dict_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.ordered_dict_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#cassandra.query.dict_factory" title="cassandra.query.dict_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict_factory()</span></code></a>, but returns each row as an OrderedDict,
so the order of the columns is preserved.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.SimpleStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">SimpleStatement</code><span class="sig-paren">(</span><em>query_string</em>, <em>retry_policy=None</em>, <em>consistency_level=None</em>, <em>routing_key=None</em>, <em>serial_consistency_level=None</em>, <em>fetch_size=&lt;object object&gt;</em>, <em>keyspace=None</em>, <em>custom_payload=None</em>, <em>is_idempotent=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#SimpleStatement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.SimpleStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple, un-prepared query.</p>
<p><cite>query_string</cite> should be a literal CQL statement with the exception
of parameter placeholders that will be filled through the
<cite>parameters</cite> argument of <a class="reference internal" href="../cluster/#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>.</p>
<p>See <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> attributes for a description of the other parameters.</p>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.PreparedStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">PreparedStatement</code><a class="reference internal" href="../../../_modules/cassandra/query/#PreparedStatement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.PreparedStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A statement that has been prepared against at least one Cassandra node.
Instances of this class should not be created directly, but through
<a class="reference internal" href="../cluster/#cassandra.cluster.Session.prepare" title="cassandra.cluster.Session.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.prepare()</span></code></a>.</p>
<p>A <a class="reference internal" href="#cassandra.query.PreparedStatement" title="cassandra.query.PreparedStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">PreparedStatement</span></code></a> should be prepared only once. Re-preparing a statement
may affect performance (as the operation requires a network roundtrip).</p>
<p><b>A note about <code>*</code> in prepared statements</b>: Do not use <code class="docutils literal notranslate"><span class="pre">*</span></code> in prepared statements if you might
change the schema of the table being queried. The driver and server each
maintain a map between metadata for a schema and statements that were
prepared against that schema. When a user changes a schema, e.g. by adding
or removing a column, the server invalidates its mappings involving that
schema. However, there is currently no way to propagate that invalidation
to drivers. Thus, after a schema change, the driver will incorrectly
interpret the results of <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code> queries prepared before the schema
change. This is currently being addressed in <a class="reference external" href="https://issues.apache.org/jira/browse/CASSANDRA-10786">CASSANDRA-10786</a>.</p>
<dl class="method">
<dt id="cassandra.query.PreparedStatement.bind">
<code class="descname">bind</code><span class="sig-paren">(</span><em>values</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#PreparedStatement.bind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.PreparedStatement.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a <a class="reference internal" href="#cassandra.query.BoundStatement" title="cassandra.query.BoundStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundStatement</span></code></a> instance using <cite>values</cite>.</p>
<p>See <a class="reference internal" href="#cassandra.query.BoundStatement.bind" title="cassandra.query.BoundStatement.bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BoundStatement.bind()</span></code></a> for rules on input <code class="docutils literal notranslate"><span class="pre">values</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.BoundStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">BoundStatement</code><span class="sig-paren">(</span><em>prepared_statement</em>, <em>retry_policy=None</em>, <em>consistency_level=None</em>, <em>routing_key=None</em>, <em>serial_consistency_level=None</em>, <em>fetch_size=&lt;object object&gt;</em>, <em>keyspace=None</em>, <em>custom_payload=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#BoundStatement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BoundStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A prepared statement that has been bound to a particular set of values.
These may be created directly or through <a class="reference internal" href="#cassandra.query.PreparedStatement.bind" title="cassandra.query.PreparedStatement.bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PreparedStatement.bind()</span></code></a>.</p>
<p><cite>prepared_statement</cite> should be an instance of <a class="reference internal" href="#cassandra.query.PreparedStatement" title="cassandra.query.PreparedStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">PreparedStatement</span></code></a>.</p>
<p>See <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> attributes for a description of the other parameters.</p>
<dl class="attribute">
<dt id="cassandra.query.BoundStatement.prepared_statement">
<code class="descname">prepared_statement</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.BoundStatement.prepared_statement" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#cassandra.query.PreparedStatement" title="cassandra.query.PreparedStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">PreparedStatement</span></code></a> instance that this was created from.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BoundStatement.values">
<code class="descname">values</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.BoundStatement.values" title="Permalink to this definition">¶</a></dt>
<dd><p>The sequence of values that were bound to the prepared statement.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.query.BoundStatement.bind">
<code class="descname">bind</code><span class="sig-paren">(</span><em>values</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#BoundStatement.bind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BoundStatement.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds a sequence of values for the prepared statement parameters
and returns this instance.  Note that <cite>values</cite> <em>must</em> be:</p>
<ul class="simple">
<li>a sequence, even if you are only binding one value, or</li>
<li>a dict that relates 1-to-1 between dict keys and columns</li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6.0: </span><a class="reference internal" href="#cassandra.query.UNSET_VALUE" title="cassandra.query.UNSET_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">UNSET_VALUE</span></code></a> was introduced. These can be bound as positional parameters
in a sequence, or by name in a dict. Additionally, when using protocol v4+:</p>
<ul class="simple">
<li>short sequences will be extended to match bind parameters with UNSET_VALUE</li>
<li>names may be omitted from a dict with UNSET_VALUE implied.</li>
</ul>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.0.0: </span>method will not throw if extra keys are present in bound dict (PYTHON-178)</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BoundStatement.routing_key">
<code class="descname">routing_key</code><a class="headerlink" href="#cassandra.query.BoundStatement.routing_key" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../metadata/#cassandra.metadata.TableMetadata.partition_key" title="cassandra.metadata.TableMetadata.partition_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">partition_key</span></code></a> portion of the primary key,
which can be used to determine which nodes are replicas for the query.</p>
<p>If the partition key is a composite, a list or tuple must be passed in.
Each key component should be in its packed (binary) format, so all
components should be strings.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.Statement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">Statement</code><a class="reference internal" href="../../../_modules/cassandra/query/#Statement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.Statement" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract class representing a single query. There are three subclasses:
<a class="reference internal" href="#cassandra.query.SimpleStatement" title="cassandra.query.SimpleStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleStatement</span></code></a>, <a class="reference internal" href="#cassandra.query.BoundStatement" title="cassandra.query.BoundStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundStatement</span></code></a>, and <a class="reference internal" href="#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchStatement</span></code></a>.
These can be passed to <a class="reference internal" href="../cluster/#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>.</p>
<dl class="attribute">
<dt id="cassandra.query.Statement.retry_policy">
<code class="descname">retry_policy</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.Statement.retry_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a <a class="reference internal" href="../policies/#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.policies.RetryPolicy</span></code></a> or one of its
subclasses.  This controls when a query will be retried and how it
will be retried.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.consistency_level">
<code class="descname">consistency_level</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.Statement.consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../#cassandra.ConsistencyLevel" title="cassandra.ConsistencyLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConsistencyLevel</span></code></a> to be used for this operation.  Defaults
to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>, which means that the default consistency level for
the Session this is executed in will be used.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.fetch_size">
<code class="descname">fetch_size</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#cassandra.query.Statement.fetch_size" title="Permalink to this definition">¶</a></dt>
<dd><p>How many rows will be fetched at a time.  This overrides the default
of <a class="reference internal" href="../cluster/#cassandra.cluster.Session.default_fetch_size" title="cassandra.cluster.Session.default_fetch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.default_fetch_size</span></code></a></p>
<p>This only takes effect when protocol version 2 or higher is used.
See <a class="reference internal" href="../cluster/#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Cluster.protocol_version</span></code></a> for details.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.keyspace">
<code class="descname">keyspace</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.Statement.keyspace" title="Permalink to this definition">¶</a></dt>
<dd><p>The string name of the keyspace this query acts on. This is used when
<a class="reference internal" href="../policies/#cassandra.policies.TokenAwarePolicy" title="cassandra.policies.TokenAwarePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TokenAwarePolicy</span></code></a> is configured in the profile load balancing policy.</p>
<p>It is set implicitly on <a class="reference internal" href="#cassandra.query.BoundStatement" title="cassandra.query.BoundStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundStatement</span></code></a>, and <a class="reference internal" href="#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchStatement</span></code></a>,
but must be set explicitly on <a class="reference internal" href="#cassandra.query.SimpleStatement" title="cassandra.query.SimpleStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleStatement</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.3.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.custom_payload">
<code class="descname">custom_payload</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.Statement.custom_payload" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../protocol/#custom-payload"><span class="std std-ref">Custom Payloads</span></a> to be passed to the server.</p>
<p>These are only allowed when using protocol version 4 or higher.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.is_idempotent">
<code class="descname">is_idempotent</code><em class="property"> = False</em><a class="headerlink" href="#cassandra.query.Statement.is_idempotent" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating whether this statement is safe to run multiple times in speculative execution.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.routing_key">
<code class="descname">routing_key</code><a class="headerlink" href="#cassandra.query.Statement.routing_key" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../metadata/#cassandra.metadata.TableMetadata.partition_key" title="cassandra.metadata.TableMetadata.partition_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">partition_key</span></code></a> portion of the primary key,
which can be used to determine which nodes are replicas for the query.</p>
<p>If the partition key is a composite, a list or tuple must be passed in.
Each key component should be in its packed (binary) format, so all
components should be strings.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.serial_consistency_level">
<code class="descname">serial_consistency_level</code><a class="headerlink" href="#cassandra.query.Statement.serial_consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The serial consistency level is only used by conditional updates
(<code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> with an <code class="docutils literal notranslate"><span class="pre">IF</span></code> condition).  For
those, the <code class="docutils literal notranslate"><span class="pre">serial_consistency_level</span></code> defines the consistency level of
the serial phase (or “paxos” phase) while the normal
<a class="reference internal" href="#cassandra.query.Statement.consistency_level" title="cassandra.query.Statement.consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">consistency_level</span></code></a> defines the consistency for the “learn” phase,
i.e. what type of reads will be guaranteed to see the update right away.
For example, if a conditional write has a <a class="reference internal" href="#cassandra.query.Statement.consistency_level" title="cassandra.query.Statement.consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">consistency_level</span></code></a> of
<a class="reference internal" href="../#cassandra.ConsistencyLevel.QUORUM" title="cassandra.ConsistencyLevel.QUORUM"><code class="xref py py-attr docutils literal notranslate"><span class="pre">QUORUM</span></code></a> (and is successful), then a
<a class="reference internal" href="../#cassandra.ConsistencyLevel.QUORUM" title="cassandra.ConsistencyLevel.QUORUM"><code class="xref py py-attr docutils literal notranslate"><span class="pre">QUORUM</span></code></a> read is guaranteed to see that write.
But if the regular <a class="reference internal" href="#cassandra.query.Statement.consistency_level" title="cassandra.query.Statement.consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">consistency_level</span></code></a> of that write is
<a class="reference internal" href="../#cassandra.ConsistencyLevel.ANY" title="cassandra.ConsistencyLevel.ANY"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ANY</span></code></a>, then only a read with a
<a class="reference internal" href="#cassandra.query.Statement.consistency_level" title="cassandra.query.Statement.consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">consistency_level</span></code></a> of <a class="reference internal" href="../#cassandra.ConsistencyLevel.SERIAL" title="cassandra.ConsistencyLevel.SERIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SERIAL</span></code></a> is
guaranteed to see it (even a read with consistency
<a class="reference internal" href="../#cassandra.ConsistencyLevel.ALL" title="cassandra.ConsistencyLevel.ALL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ALL</span></code></a> is not guaranteed to be enough).</p>
<p>The serial consistency can only be one of <a class="reference internal" href="../#cassandra.ConsistencyLevel.SERIAL" title="cassandra.ConsistencyLevel.SERIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SERIAL</span></code></a>
or <a class="reference internal" href="../#cassandra.ConsistencyLevel.LOCAL_SERIAL" title="cassandra.ConsistencyLevel.LOCAL_SERIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">LOCAL_SERIAL</span></code></a>. While <code class="docutils literal notranslate"><span class="pre">SERIAL</span></code> guarantees full
linearizability (with other <code class="docutils literal notranslate"><span class="pre">SERIAL</span></code> updates), <code class="docutils literal notranslate"><span class="pre">LOCAL_SERIAL</span></code> only
guarantees it in the local data center.</p>
<p>The serial consistency level is ignored for any query that is not a
conditional update. Serial reads should use the regular
<a class="reference internal" href="#cassandra.query.Statement.consistency_level" title="cassandra.query.Statement.consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">consistency_level</span></code></a>.</p>
<p>Serial consistency levels may only be used against Cassandra 2.0+
and the <a class="reference internal" href="../cluster/#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> must be set to 2 or higher.</p>
<p>See <a class="reference internal" href="../../../lwt/"><span class="doc">Lightweight Transactions (Compare-and-set)</span></a> for a discussion on how to work with results returned from
conditional statements.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="cassandra.query.UNSET_VALUE">
<code class="descclassname">cassandra.query.</code><code class="descname">UNSET_VALUE</code><a class="headerlink" href="#cassandra.query.UNSET_VALUE" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies an unset value when binding a prepared statement.</p>
<p>Unset values are ignored, allowing prepared statements to be used without specify</p>
<p>See <a class="reference external" href="https://issues.apache.org/jira/browse/CASSANDRA-7304">https://issues.apache.org/jira/browse/CASSANDRA-7304</a> for further details on semantics.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.0.</span></p>
</div>
<p>Only valid when using native protocol v4+</p>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.BatchStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">BatchStatement</code><span class="sig-paren">(</span><em>batch_type=BatchType.LOGGED</em>, <em>retry_policy=None</em>, <em>consistency_level=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#BatchStatement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BatchStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A protocol-level batch of operations which are applied atomically
by default.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<p><cite>batch_type</cite> specifies The <a class="reference internal" href="#cassandra.query.BatchType" title="cassandra.query.BatchType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchType</span></code></a> for the batch operation.
Defaults to <a class="reference internal" href="#cassandra.query.BatchType.LOGGED" title="cassandra.query.BatchType.LOGGED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BatchType.LOGGED</span></code></a>.</p>
<p><cite>retry_policy</cite> should be a <a class="reference internal" href="../policies/#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RetryPolicy</span></code></a> instance for
controlling retries on the operation.</p>
<p><cite>consistency_level</cite> should be a <a class="reference internal" href="../#cassandra.ConsistencyLevel" title="cassandra.ConsistencyLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConsistencyLevel</span></code></a> value
to be used for all operations in the batch.</p>
<p><cite>custom_payload</cite> is a <a class="reference internal" href="../protocol/#custom-payload"><span class="std std-ref">Custom Payloads</span></a> passed to the server.
Note: as Statement objects are added to the batch, this map is
updated with any values found in their custom payloads. These are
only allowed when using protocol version 4 or higher.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">insert_user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span class="p">)</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">BatchStatement</span><span class="p">(</span><span class="n">consistency_level</span><span class="o">=</span><span class="n">ConsistencyLevel</span><span class="o">.</span><span class="n">QUORUM</span><span class="p">)</span>

<span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="ow">in</span> <span class="n">users_to_insert</span><span class="p">:</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">insert_user</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>

<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also mix different types of operations within a batch:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">BatchStatement</span><span class="p">()</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SimpleStatement</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users (name, age) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SimpleStatement</span><span class="p">(</span><span class="s2">&quot;DELETE FROM pending_users WHERE name=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1.0: </span>Added <cite>serial_consistency_level</cite> as a parameter</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6.0: </span>Added <cite>custom_payload</cite> as a parameter</p>
</div>
<dl class="attribute">
<dt id="cassandra.query.BatchStatement.serial_consistency_level">
<code class="descname">serial_consistency_level</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.BatchStatement.serial_consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as <a class="reference internal" href="#cassandra.query.Statement.serial_consistency_level" title="cassandra.query.Statement.serial_consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Statement.serial_consistency_level</span></code></a>, but is only
supported when using protocol version 3 or higher.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BatchStatement.batch_type">
<code class="descname">batch_type</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.BatchStatement.batch_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#cassandra.query.BatchType" title="cassandra.query.BatchType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchType</span></code></a> for the batch operation.  Defaults to
<a class="reference internal" href="#cassandra.query.BatchType.LOGGED" title="cassandra.query.BatchType.LOGGED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BatchType.LOGGED</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.query.BatchStatement.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#BatchStatement.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BatchStatement.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a convenience method to clear a batch statement for reuse.</p>
<p><em>Note:</em> it should not be used concurrently with uncompleted execution futures executing the same
<code class="docutils literal notranslate"><span class="pre">BatchStatement</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.query.BatchStatement.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>statement</em>, <em>parameters=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#BatchStatement.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BatchStatement.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> and optional sequence of parameters
to be used with the statement to the batch.</p>
<p>Like with other statements, parameters must be a sequence, even
if there is only one item.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.query.BatchStatement.add_all">
<code class="descname">add_all</code><span class="sig-paren">(</span><em>statements</em>, <em>parameters</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#BatchStatement.add_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BatchStatement.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a sequence of <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> objects and a matching sequence
of parameters to the batch. Statement and parameter sequences must be of equal length or
one will be truncated. <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> can be used in the parameters position where are needed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.BatchType">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">BatchType</code><a class="reference internal" href="../../../_modules/cassandra/query/#BatchType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.BatchType" title="Permalink to this definition">¶</a></dt>
<dd><p>A BatchType is used with <a class="reference internal" href="#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchStatement</span></code></a> instances to control
the atomicity of the batch operation.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<dl class="attribute">
<dt id="cassandra.query.BatchType.LOGGED">
<code class="descname">LOGGED</code><em class="property"> = BatchType.LOGGED</em><a class="headerlink" href="#cassandra.query.BatchType.LOGGED" title="Permalink to this definition">¶</a></dt>
<dd><p>Atomic batch operation.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BatchType.UNLOGGED">
<code class="descname">UNLOGGED</code><em class="property"> = BatchType.UNLOGGED</em><a class="headerlink" href="#cassandra.query.BatchType.UNLOGGED" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-atomic batch operation.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BatchType.COUNTER">
<code class="descname">COUNTER</code><em class="property"> = BatchType.COUNTER</em><a class="headerlink" href="#cassandra.query.BatchType.COUNTER" title="Permalink to this definition">¶</a></dt>
<dd><p>Batches of counter operations.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.ValueSequence">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">ValueSequence</code><a class="reference internal" href="../../../_modules/cassandra/encoder/#ValueSequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.ValueSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper class that is used to specify that a sequence of values should
be treated as a CQL list of values instead of a single column collection when used
as part of the <cite>parameters</cite> argument for <a class="reference internal" href="../cluster/#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>.</p>
<p>This is typically needed when supplying a list of keys to select.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_user_ids</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">,</span> <span class="s1">&#39;bob&#39;</span><span class="p">,</span> <span class="s1">&#39;charles&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM users WHERE user_id IN </span><span class="si">%s</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">ValueSequence</span><span class="p">(</span><span class="n">my_user_ids</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.QueryTrace">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">QueryTrace</code><a class="reference internal" href="../../../_modules/cassandra/query/#QueryTrace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.QueryTrace" title="Permalink to this definition">¶</a></dt>
<dd><p>A trace of the duration and events that occurred when executing
an operation.</p>
<dl class="attribute">
<dt id="cassandra.query.QueryTrace.request_type">
<code class="descname">request_type</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.request_type" title="Permalink to this definition">¶</a></dt>
<dd><p>A string that very generally describes the traced operation.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.duration">
<code class="descname">duration</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> measure of the duration of the query.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.client">
<code class="descname">client</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.client" title="Permalink to this definition">¶</a></dt>
<dd><p>The IP address of the client that issued this request</p>
<p>This is only available when using Cassandra 2.2+</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.coordinator">
<code class="descname">coordinator</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.coordinator" title="Permalink to this definition">¶</a></dt>
<dd><p>The IP address of the host that acted as coordinator for this request.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.parameters">
<code class="descname">parameters</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of parameters for the traced operation, such as the
specific query string.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.started_at">
<code class="descname">started_at</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.started_at" title="Permalink to this definition">¶</a></dt>
<dd><p>A UTC <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> object describing when the operation
was started.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.events">
<code class="descname">events</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.events" title="Permalink to this definition">¶</a></dt>
<dd><p>A chronologically sorted list of <a class="reference internal" href="#cassandra.query.TraceEvent" title="cassandra.query.TraceEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">TraceEvent</span></code></a> instances
representing the steps the traced operation went through.  This
corresponds to the rows in <code class="docutils literal notranslate"><span class="pre">system_traces.events</span></code> for this tracing
session.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.QueryTrace.trace_id">
<code class="descname">trace_id</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.QueryTrace.trace_id" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">uuid.UUID</span></code> unique identifier for this tracing session.  Matches
the <code class="docutils literal notranslate"><span class="pre">session_id</span></code> column in <code class="docutils literal notranslate"><span class="pre">system_traces.sessions</span></code> and
<code class="docutils literal notranslate"><span class="pre">system_traces.events</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.query.QueryTrace.populate">
<code class="descname">populate</code><span class="sig-paren">(</span><em>max_wait=2.0</em>, <em>wait_for_complete=True</em>, <em>query_cl=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/query/#QueryTrace.populate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.QueryTrace.populate" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the actual tracing details from Cassandra and populates the
attributes of this instance.  Because tracing details are stored
asynchronously by Cassandra, this may need to retry the session
detail fetch.  If the trace is still not available after <cite>max_wait</cite>
seconds, <a class="reference internal" href="#cassandra.query.TraceUnavailable" title="cassandra.query.TraceUnavailable"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TraceUnavailable</span></code></a> will be raised; if <cite>max_wait</cite> is
<code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>, this will retry forever.</p>
<p><cite>wait_for_complete=False</cite> bypasses the wait for duration to be populated.
This can be used to query events from partial sessions.</p>
<p><cite>query_cl</cite> specifies a consistency level to use for polling the trace tables,
if it should be different than the session default.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.TraceEvent">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">TraceEvent</code><a class="reference internal" href="../../../_modules/cassandra/query/#TraceEvent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.TraceEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of a single event within a query trace.</p>
<dl class="attribute">
<dt id="cassandra.query.TraceEvent.description">
<code class="descname">description</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.TraceEvent.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A brief description of the event.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.TraceEvent.datetime">
<code class="descname">datetime</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.TraceEvent.datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>A UTC <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> marking when the event occurred.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.TraceEvent.source">
<code class="descname">source</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.TraceEvent.source" title="Permalink to this definition">¶</a></dt>
<dd><p>The IP address of the node this event occurred on.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.TraceEvent.source_elapsed">
<code class="descname">source_elapsed</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.TraceEvent.source_elapsed" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> measuring the amount of time until
this event occurred starting from when <a class="reference internal" href="#cassandra.query.TraceEvent.source" title="cassandra.query.TraceEvent.source"><code class="xref py py-attr docutils literal notranslate"><span class="pre">source</span></code></a> first
received the query.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.TraceEvent.thread_name">
<code class="descname">thread_name</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.query.TraceEvent.thread_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the thread that this event occurred on.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="cassandra.query.TraceUnavailable">
<em class="property">exception </em><code class="descclassname">cassandra.query.</code><code class="descname">TraceUnavailable</code><a class="reference internal" href="../../../_modules/cassandra/query/#TraceUnavailable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.TraceUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when complete trace details cannot be fetched from Cassandra.</p>
</dd></dl>

</div>

        </div>

        <div id="sidebar" class="large-3 large-pull-9 columns"><div class="side-nav">
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../"><code class="docutils literal notranslate"><span class="pre">cassandra</span></code> - Exceptions and Enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster/"><code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../policies/"><code class="docutils literal notranslate"><span class="pre">cassandra.policies</span></code> - Load balancing and Failure Handling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth/"><code class="docutils literal notranslate"><span class="pre">cassandra.auth</span></code> - Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graph/"><code class="docutils literal notranslate"><span class="pre">cassandra.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/"><code class="docutils literal notranslate"><span class="pre">cassandra.metadata</span></code> - Schema and Ring Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics/"><code class="docutils literal notranslate"><span class="pre">cassandra.metrics</span></code> - Performance Metrics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pool/"><code class="docutils literal notranslate"><span class="pre">cassandra.pool</span></code> - Hosts and Connection Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocol/"><code class="docutils literal notranslate"><span class="pre">cassandra.protocol</span></code> - Protocol Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../encoder/"><code class="docutils literal notranslate"><span class="pre">cassandra.encoder</span></code> - Encoders for non-prepared Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decoder/"><code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> - Data Return Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concurrent/"><code class="docutils literal notranslate"><span class="pre">cassandra.concurrent</span></code> - Utilities for Concurrent Statement Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connection/"><code class="docutils literal notranslate"><span class="pre">cassandra.connection</span></code> - Low Level Connection Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/"><code class="docutils literal notranslate"><span class="pre">cassandra.util</span></code> - Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timestamps/"><code class="docutils literal notranslate"><span class="pre">cassandra.timestamps</span></code> - Timestamp Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/asyncioreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncioreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/asyncorereactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncorereactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncore</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/eventletreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.eventletreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">eventlet</span></code>-compatible Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/libevreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.libevreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">libev</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/geventreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.geventreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">gevent</span></code>-compatible Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/twistedreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.twistedreactor</span></code> - Twisted Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/models/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.models</span></code> - Table models for object mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/columns/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.columns</span></code> - Column types for object mapping models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/query/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.query</span></code> - Query and filter model objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/connection/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.connection</span></code> - Connection management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/management/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.management</span></code> - Schema management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/usertype/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.usertype</span></code> - Model classes for User Defined Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/fluent/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/fluent/query/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.query</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/fluent/predicates/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.predicates</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrading/">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../execution_profiles/">Execution Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance/">Performance Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../query_paging/">Paging Large Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lwt/">Lightweight Transactions (Compare-and-set)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_defined_types/">User Defined Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../object_mapper/">Object Mapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../geo_types/">DSE Geometry Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../graph/">DataStax Graph Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../graph_fluent/">DataStax Graph Fluent API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dates_and_times/">Working with Dates and Times</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/">Frequently Asked Questions</a></li>
</ul>

</div>
        </div>

    </div>
</section>

<!-- newsleter modal -->

<div id="newsletter_signup" class="reveal-modal tiny radius dark_modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <a class="close-reveal-modal" aria-label="Close">×</a>
    <h2 id="modalTitle">Sign up for the Scylla newsletter</h2>
    <div id="mc_embed_signup">
        <form action="//cloudius-systems.us10.list-manage.com/subscribe/post?u=df8bb543c68230d5f7b4dcf78&amp;id=9a4589f144" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">

                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-EMAIL">Email</label></div>
                        <div class="small-9 columns"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-FNAME">First Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="FNAME" class="" id="mce-FNAME"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-LNAME">Last Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="LNAME" class="" id="mce-LNAME"></div>
                    </div>
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_df8bb543c68230d5f7b4dcf78_9a4589f144" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" class="button" value="Sign up" name="subscribe" id="mc-embedded-subscribe"></div>
            </div>
        </form>
    </div>
</div>

<!-- end newsleter modal -->



<!-- footer.html -->
<footer id="footer">
    <div class="footer-top">
        <a class="logo" href="https://www.scylladb.com"><img src="../../../_static/img/logo-scylla-horizontal-RGB.svg" alt=""></a>
        <div class="footer-links">
            <a class="link" href="https://docs.scylladb.com">Docs</a>
            <a class="link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
            <a class="link" href="https://www.scylladb.com/company/">About Us</a>
            <a class="link button" href="https://github.com/scylladb/python-driver/issues/new?title=Issue in page <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20http://docs.scylladb.com/api/cassandra/query%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix" target="_blank">
                Report an issue on this page</a>
        </div>
        <div class="footer-actions">
            <a class="link-icon" href="https://github.com/ScyllaDB" target="_blank">
                <span class="icon-github2"></span></a>
            <a class="link-icon" href="https://twitter.com/ScyllaDB" target="_blank">
                <span class="icon-twitter"></span></a>
            <a class="link-icon" href="https://www.linkedin.com/company/scylladb"  target="_blank">
                <span class="icon-linkedin2"></span></a>
            <a class="link-icon" href="https://www.facebook.com/scylladb/" target="_blank">
                <span class="icon-facebook"></span></a>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="footer-info">
            <div class="footer-copyright">
                &#169; 2013-2017 DataStax
            </div>
        </div>
        <div class="footer-links">
        </div>
    </div>
</footer>
<!-- end footer.html -->

<!-- bodyscripts.html -->
<!-- at the end of the BODY --> 
<script src="../../../_static/js/vendor/jquery.js"></script>
<script src="../../../_static/expertrec.js"></script>
<script src="../../../_static/js/foundation/foundation.js"></script>
<script src="../../../_static/js/foundation/foundation.topbar.js"></script>
<script src="../../../_static/app.js"></script>
<script>
    $(document).foundation();
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- end bodyscripts.html -->
</body>
</html>